<h1>All Articles</h1>

<% if user_signed_in? %>
  <%= link_to "New Article", new_article_path %>
<% end %>

<% @articles.each do |article| %>
  <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
    <h2><%= link_to article.title, article_path(article) %></h2>
    <p><%= truncate(article.content, length: 100) %></p>

    <% if article.image? %>
        <%= image_tag article.image.url, width: 200 %>
    <% end %>

    <p>By: <%= article.user.email %></p>
    <p>Reports: <%= article.reports_count || 0 %></p>

    <% if user_signed_in? && article.user != current_user %>
      <%= button_to "Report", report_article_path(article), method: :patch, data: { confirm: "Are you sure?" } %>
    <% end %>
  </div>
<% end %>
